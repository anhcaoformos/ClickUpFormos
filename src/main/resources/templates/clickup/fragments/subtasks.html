<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <th:block th:fragment="subtasks">
    <div id="subtasks" th:if="${not #lists.isEmpty(task.getSubtasks())}">
      <hr class="separate_sections" />
      <h2>Subtasks:</h2>
      <div class="row_start page_break_inside" th:each="subtask : ${task.getSubtasks()}">
        <div
          class="subtask_status"
          th:style="'border: 1px solid ' + ${subtask.getStatusColor()} + '; background: ' + ${subtask.getStatusColor()} + ';'"
        ></div>
        <div class="mr10px" th:text="${subtask.getName()}"></div>
        <div th:if="${not #lists.isEmpty(subtask.getAssignees())}" th:each="assignee : ${subtask.getAssignees()}">
          <div class="user_img" th:text="${assignee.getInitials()}" th:style="'background:' + ${assignee.getColor()}"></div>
        </div>
        <div class="mr10px">
          <svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M5 1C4.44772 1 4 1.44772 4 2V22C4 22.5523 4.44772 23 5 23C5.55228 23 6 22.5523 6 22V14H19C19.3603 14 19.6927 13.8062 19.8702 13.4927C20.0477 13.1792 20.0429 12.7944 19.8575 12.4855L17.1662 8L19.8575 3.5145C20.0429 3.20556 20.0477 2.82081 19.8702 2.5073C19.6927 2.19379 19.3603 2 19 2L6 2C6 1.44772 5.55228 1 5 1ZM6 4V12H17.2338L15.1425 8.5145C14.9525 8.19781 14.9525 7.80219 15.1425 7.4855L17.2338 4H6Z"
              th:fill="${subtask.getPriorityColor()}"
            />
          </svg>
        </div>
        <div class="mr10px" th:text="${subtask.getDueDate()}"></div>
        <div class="mr10px" th:if="${not #lists.isEmpty(subtask.getTags())}" th:each="tag : ${subtask.getTags()}">
          <div
            class="tag"
            th:style="'background: ' + ${tag.getTagBackground()} + '; text-color: ' + ${tag.getTagForeground()} + ';'"
            th:text="${tag.getName()}"
          ></div>
        </div>
      </div>
    </div>
  </th:block>
</html>
